const c={ageCheckPopup:"age-check-popup",ageCheckPopupToggle:"AgeCheckPopupToggle",confirmButton:".js-age-check-popup-confirm"},m=()=>{const p=window.themeCore.utils.Toggle,u=window.themeCore.utils.on,l=window.themeCore.utils.setCookie,g=window.themeCore.utils.getCookie;let o,i,t,n;function s(){if(o=document.getElementById(c.ageCheckPopup),!o){if(Shopify.designMode){const e=document.querySelector("[data-js-overlay='AgeCheckPopupToggle']");document.body.classList.remove("blur-content"),e&&e.click()}return}i=o.getAttribute("data-redirect-url"),d(),a()}function d(){g("age_check_popup")||(t=p({toggleSelector:c.ageCheckPopupToggle}),window.themeCore.ageCheckPopupOpen=!0,t.init(),document.body.classList.add("blur-content"),t.open(o),u("click",o,function(e){e.target==this&&t.close(o)}),window.themeCore.EventBus.listen(`Toggle:${c.ageCheckPopupToggle}:close`,()=>{n||(window.location.href=i)}),u("keyup",e=>{e.keyCode===27&&(n||(window.location.href=i))}))}function a(){const e=document.querySelector(c.confirmButton);e&&e.addEventListener("click",function(){h(),document.body.classList.remove("blur-content"),n=!0,t.close(o)})}function h(){if(!o.hasAttribute("data-cookie-time"))return;let k=o.dataset.cookieTime*24*60*60;l("age_check_popup","1",{"max-age":k})}return Object.freeze({init:s})},r=()=>{window.themeCore.AgeCheckPopup=window.themeCore.AgeCheckPopup||m(),window.themeCore.utils.register(window.themeCore.AgeCheckPopup,"age-check-popup")};window.themeCore&&window.themeCore.loaded?r():document.addEventListener("theme:all:loaded",r,{once:!0});
