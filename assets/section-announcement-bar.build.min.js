const S=()=>{let u;const d=window.themeCore.utils.cssClasses,t={section:".js-announcement-bar",announcementBarCloser:".js-bar-closer",timer:".js-timer",slider:".js-announcement-bar-slider",slideContent:".js-announcement-bar-slide-content"},w=window.themeCore.utils.Swiper;let o=null,a=null,m=null,n=null;function f(){return JSON.parse(sessionStorage.getItem("showAnnouncementBar"))===null}function p(e){e.target.closest(t.announcementBarCloser)&&(sessionStorage.setItem("showAnnouncementBar",!1),o.classList.add(d.hidden),window.themeCore.EventBus.emit("announcement-bar:changed",{}),window.removeEventListener("resize",c))}async function C(e){if(!e)return;const r=await window.themeCore.utils.getExternalUtil("swiperAutoplay");w.use([r]);const s=e.getAttribute("data-autoplay-speed"),l=e.getAttribute("data-autoplay")==="true";n=new w(e,{init:!1,direction:"vertical",slidesPerView:1,arrows:!1,loop:!0,navigation:{nextEl:".js-announcement-swiper-button-next",prevEl:".js-announcement-swiper-button-prev"},autoplay:l?{delay:s,disableOnInteraction:!1,pauseOnMouseEnter:!0}:!1}),n.on("init",function(){c(),window.addEventListener("resize",c)}),n.init()}function c(){if(!n||!n.initialized)return;let e=n.el,r=n.slides;if(!n||!n||!r.length)return;let s=0;e.style.height=0,r.forEach(l=>{let i=l.querySelector(t.slideContent);i&&(i.style.height="auto",i&&i.scrollHeight>s&&(s=i.scrollHeight))}),e.style.height=`${s}px`,r.forEach(function(l){let i=l.querySelector(t.slideContent);i.style.height=""})}async function g(){u=window.themeCore.utils.Timer,o=document.querySelector(t.section),a=o.querySelectorAll(t.timer),m=o.querySelector(t.slider),f()&&(o.classList.remove(d.hidden),o.addEventListener("click",p),window.themeCore.EventBus.emit("announcement-bar:changed",{}),C(m),setTimeout(()=>{a=o.querySelectorAll(t.timer),a.forEach(function(e){u(e).init()})},0))}return Object.freeze({init:g})},h=()=>{window.themeCore.AnnouncementBar=window.themeCore.AnnouncementBar||S(),window.themeCore.utils.register(window.themeCore.AnnouncementBar,"announcement-bar")};window.themeCore&&window.themeCore.loaded?h():document.addEventListener("theme:all:loaded",h,{once:!0});
