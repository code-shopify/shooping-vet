const o={announcementBar:".js-announcement-bar",header:".header-section",headerInner:".js-header",headerDrawerToggler:".js-header-drawer-toggler",headerDrawerCloseButton:".js-header-drawer-close-button",drawerMenu:"#headerDrawerMenu",mainMenuToggler:".js-main-menu-toggler",headerMenu:".js-mobile-header-menu",headerMainMenu:".js-mobile-header-main-menu",headerMenuToggler:".js-mobile-header-menu-toggler",headerDropdownToggler:".js-header-dropdown-menu-toggler",headerDropdownMenu:".js-header-dropdown-menu",headerMegaMenu:".js-header-mega-menu",headerMegaMenuToggler:".js-header-mega-menu-toggler",headerMegaMenuTogglerNested:".js-header-mega-menu-toggler-nested",headerMegaMenuNested:".js-header-mega-menu-nested",headerCartItemCount:".js-header-cart-item-count",headerCartItemCountWrapper:".js-header-cart-item-count-wrapper",predictiveSearchInput:".js-predictive-search-input",headerContent:"[data-open-menu-type]",headerDropdownMenuElement:".js-header-dropdown-menu-element",headerMegaMenuContent:".js-header-mega-menu-content",localizationForm:".js-localization-form",localizationInput:"input[name='language_code'], input[name='country_code']",localizationButton:".js-disclosure__button",localizationPanel:".js-disclosure-list",localizationLink:".js-disclosure__link"},T={drawerToggle:"data-js-toggle",itemCount:"data-cart-count",hideOnScrollDown:"data-hide-on-scroll-down",headerTransparent:"data-header-transparent",staticHeader:"data-static-header",ariaExpanded:"aria-expanded",hidden:"hidden",tabIndex:"tabindex"},h={headerHeight:"--header-height",headerHeightStatic:"--header-height-static",headerOffsetTop:"--header-offset-top",headerOffsetTopStatic:"--header-offset-top-static",pageHeight:"--page-height",announcementBarHeight:"--announcement-bar-height"},$e=()=>{const oe=window.themeCore.utils.Toggle,d=window.themeCore.utils.cssClasses,Me=window.themeCore.utils.isElement,c=window.themeCore.utils.on,_=window.themeCore.utils.focusable,Te=window.themeCore.utils.removeTrapFocus,re=window.themeCore.utils.trapFocus,ve=window.themeCore.utils.bind,ae=window.themeCore.utils.debounce,S=ve(document.documentElement,{className:"esc-bind"});let W,F,n,H,j,A,w,R,ie,se,M,V,Q,Y,z,g,O,p,G,f,$,P,de,y,J,le,L,K,U,X,x;const ye="(min-width: 1200px)",ce=window.matchMedia(ye);function Ce(){W=document.querySelector(":root"),n=document.querySelector(o.header),H=document.querySelector(o.headerInner),F=document.querySelector(o.announcementBar),n&&(U=document.documentElement.scrollTop||document.body.scrollTop,j=n.querySelector(o.headerCartItemCount),A=n.querySelector(o.headerContent),le=A.hasAttribute(T.hideOnScrollDown),L=A.hasAttribute(T.headerTransparent),K=A.hasAttribute(T.staticHeader),w=A.dataset.openMenuType,R=w==="click"?"click":"mouseenter",ie=n.querySelector(o.headerCartItemCountWrapper),L&&n.classList.add("header-section--transparent","header-section--top-position"),se=[...n.querySelectorAll(o.headerDrawerToggler)],M=n.querySelector(o.drawerMenu),V=n.querySelector(o.mainMenuToggler),Q=n.querySelector(o.headerDrawerCloseButton),de=n.querySelector(o.headerMainMenu),Y=[...n.querySelectorAll(o.headerMenuToggler)],P=[],M&&(P=[...M.querySelectorAll(o.headerMenu)]),z=[...n.querySelectorAll(o.headerDropdownToggler)],g=[...n.querySelectorAll(o.headerDropdownMenu)],O=[...n.querySelectorAll(o.headerMegaMenuToggler)],p=[...n.querySelectorAll(o.headerMegaMenu)],G=[...n.querySelectorAll(o.headerMegaMenuTogglerNested)],f=[...n.querySelectorAll(o.headerMegaMenuNested)],$={},y=b(),J=y,x=!1,Ae(),be(),Ee(),Se(),k())}function be(){c("scroll",ae(()=>setTimeout(C,0),10,!1)),c("resize",()=>C()),L&&(c("scroll",ae(()=>setTimeout(k,0),0,!1)),c("resize",()=>k()),c("mouseover",n,()=>{n.classList.contains(d.hover)||n.classList.add(d.hover),C()}),c("focusin",n,()=>{n.classList.contains(d.hover)||n.classList.add(d.hover),C()}),c("mouseleave",n,()=>{n.classList.contains(d.hover)&&!s(p).length&&!s(g).length&&!s(f).length&&!q()&&n.classList.remove(d.hover),C()}),c("focusout",n,e=>{H.contains(e.relatedTarget)||(n.classList.contains(d.hover)&&!s(p).length&&!s(g).length&&!s(f).length&&!q()&&n.classList.remove(d.hover),C())})),Q&&c("click",Q,()=>window.themeCore.EventBus.emit("Toggle:headerToggleMenuDrawer:close")),M&&c("change",ce,e=>{e.matches?v(M)&&window.themeCore.EventBus.emit("Toggle:headerToggleMenuDrawer:close"):(s(g).length&&u(s(g)),s(p).length&&u(s(p)),s(f)&&u(s(f)))}),z&&(z.forEach(e=>{const t=document.getElementById(e.dataset.target);c(R,e,r=>{u(g.filter(a=>a!==t)),u(p.filter(a=>a!==t)),w==="hover"?D(t,!1):B(r,t,!1,e)}),w==="hover"&&c("click",e,r=>{e.matches(":not(:focus-visible)")||(u(g.filter(a=>a!==t)),B(r,t,!1,e))})}),c("click",document,e=>{if(!e.target.closest(o.headerDropdownMenu)&&s(g).length){if(w==="hover"&&e.target.matches(":not(:focus-visible)"))return;u(s(g)),window.themeCore.Accordion.collapseAllItems(o.headerDropdownMenu)}})),Y&&Y.forEach(e=>{const t=document.getElementById(e.dataset.target);c("click",e,r=>{if(x)return;let a=!1,i=document.getElementById(r.target.closest(o.headerMenuToggler).dataset.target);if(v(i)&&(a=!0),B(r,t,!0,700,!0,!1),a){let l;i.dataset.menuType==="deep-nested"?i.closest('[data-menu-type="deep-nested"]')&&(M.classList.remove(d.grandChildActive),l=i.closest('[data-menu-type="nested"]')):i.dataset.menuType==="nested"&&i.closest('[data-menu-type="nested"]')&&(M.classList.remove(d.childActive),l=i.closest('[data-menu-type="main"]')),l&&pe(l),S.isSet()||S.set()}else i.dataset.menuType==="deep-nested"?i.closest('[data-menu-type="deep-nested"]')&&M.classList.add(d.grandChildActive):i.dataset.menuType==="nested"&&i.closest('[data-menu-type="nested"]')&&(M.classList.add(d.childActive),de.scrollTop=0),Ie(i)})}),O&&O.forEach(e=>{const t=document.getElementById(e.dataset.target),r=e.closest(o.headerDropdownMenuElement),a=r.querySelector(o.headerMegaMenuNested),i=r.querySelector(o.headerMegaMenuTogglerNested),l=i&&i.closest(".header-mega-menu__menu-item-wrapper").matches(":first-child"),I=(N,Oe)=>{if(x)return;u(p.filter(ne=>ne!==t)),u(g.filter(ne=>ne!==t)),s(f).length&&u(f,!0,0);let te=window.matchMedia("(hover: none)").matches;Oe?B(N,t,te,500):w==="hover"?D(t,te):B(N,t,te),setTimeout(()=>{l&&v(t)&&D(a,!1,!1)})};w==="hover"&&c(R,e,I),c("click",e,N=>{w==="hover"&&e.matches(":not(:focus-visible)")||I(N,!0)})}),G&&G.forEach(e=>{const t=document.getElementById(e.dataset.target);c("click",e,r=>{let a=document.getElementById(r.target.closest(o.headerMegaMenuTogglerNested).dataset.target);if(!v(a)){u(f.filter(l=>l!==t),!1,0);let i=window.matchMedia("(hover: none)").matches;D(t,i,!1),setTimeout(()=>_(a)[0].focus(),0)}})}),w==="hover"&&(O.forEach(e=>{const t=e.closest(o.headerDropdownMenuElement),r=t.querySelector(o.headerMegaMenu),a=t.querySelector(o.headerMegaMenuContent),i=()=>e.matches(":not(:hover)")&&a.matches(":not(:hover)")&&v(r),l=()=>{let I=1e3;L&&(I=500),setTimeout(()=>{i()&&!u(p)&&s(f).length&&u(f)},I)};c("mouseleave",t,l),c("mouseleave",a,l)}),z.forEach(e=>{const t=()=>e.matches(":not(:hover)")&&r.matches(":not(:hover)")&&v(r),r=document.getElementById(e.dataset.target),a=()=>{let i=500;L&&(i=200),setTimeout(()=>{t()&&u(g)},i)};c("mouseleave",e,a),c("mouseleave",r,a)})),c("click",document,e=>{if(!e.target.closest(o.headerMegaMenu)&&s(p).length){if(w==="hover"&&e.target.matches(":not(:focus-visible)"))return;u(s(p)),s(f).length&&u(s(f))}if(!e.target.closest(o.headerDropdownMenu)&&s(g).length){if(w==="hover"&&e.target.matches(":not(:focus-visible)"))return;u(s(g)),window.themeCore.Accordion.collapseAllItems(o.headerDropdownMenu)}q()&&ee()}),(le||K)&&document.addEventListener("scroll",ze)}function Ee(){window.themeCore.EventBus.listen(["EscEvent:on","Overlay:headerToggleMenuDrawer:close","Toggle:headerToggleMenuDrawer:close"],()=>{me(V),s(P).length&&u(s(P)),s(g).length&&(u(s(g)),window.themeCore.Accordion.collapseAllItems(o.headerDropdownMenu)),s(p).length&&u(s(p)),s(f).length&&u(s(f)),M.classList.remove(d.childActive),M.classList.remove(d.grandChildActive)}),window.themeCore.EventBus.listen("Toggle:headerToggleMenuDrawer:open",()=>{Z(V)}),window.themeCore.EventBus.listen("cart:updated",e=>{He(e)}),window.themeCore.EventBus.listen("Header:loaded",()=>{g.forEach(e=>{fe(e)})}),window.themeCore.EventBus.listen(["announcement:bar:loaded","announcement-bar:changed"],()=>{C(),k()}),window.themeCore.EventBus.listen("Toggle:headerBoxShadow",e=>{Be(e)})}function Se(){m(h.headerHeight,` ${b()}px`),m(h.headerHeightStatic,` ${b()}px`),m(h.headerOffsetTop,` ${E()}px`),m(h.headerOffsetTopStatic,` ${E()}px`),m(h.pageHeight,` ${window.innerHeight}px`),m(h.announcementBarHeight,` ${he()}px`)}function C(){if(X){m(h.headerHeight,"0px"),y=0,m(h.headerOffsetTop,"0px"),m(h.pageHeight,` ${window.innerHeight}px`);return}b()!==y&&(m(h.headerHeight,` ${b()}px`),m(h.headerHeightStatic,` ${b()}px`),y=b(),J=y),E()>0?(m(h.headerOffsetTop,` ${Math.max(E(),0)}px`),E()>parseInt(ue(h.headerOffsetTopStatic))&&m(h.headerOffsetTopStatic,` ${Math.max(E(),0)}px`)):ue(h.headerOffsetTop)!==" 0px"&&m(h.headerOffsetTop,` ${Math.max(E(),0)}px`),m(h.pageHeight,` ${window.innerHeight}px`),m(h.announcementBarHeight,` ${he()}px`)}function He(e){e.hasOwnProperty("item_count")&&(ie.setAttribute(T.itemCount,e.item_count),j.innerHTML=e.item_count,e.item_count>99?j.innerHTML="99+":j.innerHTML=e.item_count)}function m(e,t){W.style.setProperty(e,t)}function ue(e){return W.style.getPropertyValue(e)}function b(){return n.getBoundingClientRect().height}function he(){return F?F.getBoundingClientRect().height:0}function E(){return H.hasAttribute("data-static-header")?0:n.getBoundingClientRect().top}function Ae(){se.forEach(e=>{let t=e.getAttribute(T.drawerToggle);if(t==="searchToggleDrawer"){const r=document.querySelector(o.predictiveSearchInput);oe({toggleSelector:t,toggleTabIndex:!0,elementToFocus:r}).init();return}oe({toggleSelector:t,toggleTabIndex:!0,overlayPlacement:n}).init()})}function v(e){return e.classList.contains(d.active)}function B(e,t,r,a,i,l){e.preventDefault(),a===void 0&&(a=200),x=!0,i===void 0&&(i=!0),l===void 0&&(l=!0),Le(t,r,a,i,l),setTimeout(()=>x=!1,a)}function Le(e,t,r,a,i){return v(e)?ge(e,!t,r,i):D(e,t,a)}function D(e,t,r){const a=window.innerWidth-document.body.clientWidth;xe(e),[...document.querySelectorAll(`[data-target="${e.id}"]`)].forEach(l=>{De(l),Z(l)}),setTimeout(()=>Z(e),0),t&&(document.body.style.overflow="hidden",H.style.paddingRight=a+"px"),r&&pe(e),S.isSet()||S.set()}function ge(e,t,r,a){if(!e||!v(e))return;e.classList.remove(d.active),[...document.querySelectorAll(`[data-target="${e.id}"]`)].forEach(l=>{qe(l),me(l)}),setTimeout(()=>fe(e),r),t&&(document.body.style.overflow=null,H.style.paddingRight="0px"),a&&je(),S.remove()}function Z(e){e.classList.add(d.active)}function me(e){e.classList.remove(d.active)}function fe(e){e.classList.add(d.hidden)}function xe(e){e.classList.remove(d.hidden)}function Be(e){n.classList.toggle(d.shadowHidden,e)}function De(e){e.setAttribute(T.ariaExpanded,!0)}function qe(e){e.setAttribute(T.ariaExpanded,!1)}function Ie(e){_(e).forEach(t=>{t.setAttribute(T.tabIndex,0)})}function pe(e){if(!e)return;$=document.activeElement;const t=_(e);if(t.length){window.setTimeout(()=>re(e,{elementToFocus:t[0]}),0);return}re(e)}function je(){Me($)&&window.setTimeout(()=>$.focus(),0),Te()}function u(e,t,r){q()&&ee(),r===void 0&&(r=200),t===void 0&&(t=!0),e.forEach(a=>{ge(a,!0,r,t)})}function s(e){return e.filter(t=>v(t))}function k(){let e=window.scrollY<=0;e&&!n.classList.contains("header-section--top-position")?n.classList.add("header-section--top-position"):!e&&n.classList.contains("header-section--top-position")&&n.classList.remove("header-section--top-position")}function ze(){let e=document.documentElement.scrollTop||document.body.scrollTop;(K?e>0:e>0&&U<=e)?getComputedStyle(document.body).overflow!=="hidden"&&(!n.matches(":hover")||!ce.matches)&&n.getBoundingClientRect().y+n.getBoundingClientRect().height<e&&(n.classList.add(d.collapsed),X=!0,window.themeCore.EventBus.emit("Toggle:headerToggleMenuDrawer:close")):(n.classList.remove(d.collapsed),X=!1),U=e,q()&&ee()}function ee(){[...document.querySelectorAll(o.localizationForm)].forEach(t=>{const r=t.querySelectorAll(o.localizationLink),a=t.querySelector(o.localizationButton);t.querySelector(o.localizationPanel).setAttribute(T.hidden,"true"),a.setAttribute(T.ariaExpanded,"false"),r.forEach(l=>l.setAttribute("tabindex",-1))})}function q(){const e=[...document.querySelectorAll(o.localizationForm)];let t=!1;return e.forEach(r=>{r.querySelector(o.localizationPanel).hasAttribute(T.hidden)||(t=!0)}),t}return Object.freeze({init:Ce,getHeaderHeight:()=>y,getHeaderHeightStatic:()=>J})},we=()=>{window.themeCore.Header=window.themeCore.Header||$e(),window.themeCore.utils.register(window.themeCore.Header,"header")};window.themeCore&&window.themeCore.loaded?we():document.addEventListener("theme:all:loaded",we,{once:!0});
