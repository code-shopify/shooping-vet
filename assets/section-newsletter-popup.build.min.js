const n={newsletterPopup:"NewsletterPopup",newsletterPopupToggle:"NewsletterPopupToggle",newsletterPopupFormInput:"newsletter-popup-contact-form-input",form:"newsletter-popup-contact-form",input:".js-newsletter-popup-input"},P={posted:"posted"},T=()=>{const u=window.themeCore.utils.Toggle,c=window.themeCore.utils.on,w=window.themeCore.utils.setCookie,d=window.themeCore.utils.getCookie,a=window.themeCore.utils.cssClasses;let e,r,s;function m(){if(e=document.getElementById(n.newsletterPopup),r=document.getElementById(n.form),s=document.querySelector(n.input),!e&&Shopify.designMode){const t=document.querySelector("[data-js-overlay='NewsletterPopupToggle']");document.body.classList.remove("blur-content"),t&&t.click()}if(!e||!r||!s)return!1;let o=i()?0:6e3;setTimeout(g,o)}function g(){let o=window.location.pathname.includes("challenge");if(d("newsletter_popup")||o||window.themeCore.ageCheckPopupOpen)return;const t=u({toggleSelector:n.newsletterPopupToggle});t.init(),t.open(e),c("click",e,function(C){C.target==this&&t.close(e)}),f(),i()&&l(),h()&&(e.classList.add(a.current),s&&s.focus())}function f(){window.themeCore.EventBus.listen(`Toggle:${n.newsletterPopupToggle}:close`,()=>{l()})}function i(){let o=document.getElementById(n.newsletterPopupFormInput);return!(!o||!o.classList.contains(P.posted))}function l(){if(!e.hasAttribute("data-cookie-time"))return;let t=e.dataset.cookieTime*24*60*60;w("newsletter_popup","1",{"max-age":t})}function h(){return!window.location.hash||window.location.hash==="#newsletter-popup-contact-form"}return Object.freeze({init:m})},p=()=>{window.themeCore.NewsletterPopup=window.themeCore.NewsletterPopup||T(),window.themeCore.utils.register(window.themeCore.NewsletterPopup,"newsletter-popup")};window.themeCore&&window.themeCore.loaded?p():document.addEventListener("theme:all:loaded",p,{once:!0});
