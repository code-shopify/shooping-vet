const F=()=>{let C,m,g,s,f;const c={component:".js-cart-notification",content:".js-cart-notification-content",close:"[data-notification-close]",modal:".js-cart-notification-modal"};let a=null,_=null,l=null,w=!1;function q(){C=window.themeCore.utils.cssClasses,m=window.themeCore.utils.on,g=window.themeCore.utils.trapFocus,s=window.themeCore.utils.formatMoney,f={...C},a=document.querySelector(c.component),a&&(_=a.querySelector(c.content),l=a.querySelector(c.modal),j())}function $(){a&&(l.focus(),g(l),a.classList.add(f.active),w=!0,window.themeCore.EventBus.emit("cart-notification:open",{modal:l}))}function h(){a&&(a.classList.remove(f.active),w=!1)}function b(e){return!_||!e?!1:(_.innerHTML=e,!0)}function D(){return w}function j(){m("click",a,N),m("click",k),window.themeCore.EventBus.listen("cart:updated",L)}function M(e){if(!e||!e.length)return null;const n=e.reduce((i,r)=>i+r.final_line_price,0),o=e.reduce((i,r)=>i+r.quantity,0),u=e.map(i=>{const r=i.url,p=i.product_title;let d,v,O,y;(i.image||window.themeCore.productPlaceholderImage)&&(d=new URL(i.image||window.themeCore.productPlaceholderImage),d.searchParams.set("width","70"),v=d.href,d.searchParams.set("width","140"),O=d.href,!i.image&&window.themeCore.productPlaceholderImageFocal&&(y=`--img-desktop-pos: ${window.themeCore.productPlaceholderImageFocal}`));const I=A(i);return`
				<div class="cart-notification-item">
					<a href="${r}" class="focus-visible-outline cart-notification-item__media">
						<div class="cart-notification-item__image-wrapper">
							${i.image||window.themeCore.productPlaceholderImage?`<img
										class="cart-notification-item__image"
										srcset="${v} 1x, ${O} 2x"
										src="${v}"
										alt="${p}"
										${y?`style="${y}"`:""}
									/>`:""}
						</div>
					</a>

					<div class="cart-notification-item__info">
						<div class="cart-notification-item__details">
							<a href="${r}" class="focus-visible-outline cart-notification-item__title">
								${p}
							</a>

							<div class="cart-notification-item__price">
								${I}
							</div>
						</div>
					</div>
				</div>
			`}).join(""),t=`
			<div class="cart-notification-summary">
				<div class="cart-notification-summary__row cart-notification-summary__row--light">
					<span class="cart-notification-summary__label">
						${window.themeCore.translations.get(`layout.cart.items_count.${o>1?"other":"one"}`)}
					</span>

					<span class="cart-notification-summary__value">
						${o}
					</span>
				</div>

				<div class="cart-notification-summary__row">
					<span class="cart-notification-summary__label">
						${window.themeCore.translations.get("cart.general.subtotal")}
					</span>

					<span class="cart-notification-summary__value">
						${s(n,window.themeCore.objects.shop.money_format)}
					</span>
				</div>
			<div>
		`;return`
			<div class="cart-notification-items">
				${u}
			</div>

			${t}
		`}function A(e){if(!e)return null;const n=e.final_price,o=e.original_line_price/e.quantity;return`
			<div class="price ${n<o?"price--on-sale":""}">
				<div class="price__container">
					<div class="price__sale">
						<span class="visually-hidden">
							${window.themeCore.translations.get("products.product.price.sale_price")}
						</span>

						<span class="price-item price-item--sale">
							${s(n,window.themeCore.objects.shop.money_format)}
						</span>

						${n!==o?`
							<span class="visually-hidden">
								${window.themeCore.translations.get("products.product.price.regular_price")}
							</span>

							<span>
								<span class="price-item price-item--regular">
									${s(o,window.themeCore.objects.shop.money_format)}
								</span>
							</span>
						`:""}
					</div>

					<div class="price__regular">
						<span class="visually-hidden">
							${window.themeCore.translations.get("products.product.price.regular_price")}
						</span>

						<span class="price-item price-item--regular">
							${s(n,window.themeCore.objects.shop.money_format)}
						</span>
					</div>

					${e.unit_price_measurement?`
						<div class="unit-price">
							<span class="visually-hidden">
								${window.themeCore.translations.get("products.product.price.unit_price")}
							</span>

							<span class="price-item price-item--last">
								<span>
									${s(e.unit_price,window.themeCore.objects.shop.money_format)}
								</span>

								<span aria-hidden="true">/</span>

								<span class="visually-hidden">&nbsp;
									${window.themeCore.translations.get("general.accessibility.unit_price_separator")}&nbsp;
								</span>

								<span>
									${e.reference_value!==1?`
										${e.unit_price_measurement.reference_value}
									`:""}

									${e.unit_price_measurement.reference_unit}
								</span>
							</span>
						</div>
					`:""}
				</div>
			</div>
		`}function N(e){e.target.closest(c.close)&&(e.preventDefault(),h())}function k(e){const n=e.target;n!==l&&!n.closest(c.modal)&&h()}function L(e){if(!e||!e.action)return;let n=null,o=[],u=[];switch(e.action){case window.themeCore.CartApi.actions.ADD_TO_CART:case window.themeCore.CartApi.actions.ADD_TO_CART_MANY:o=e.params.filter(t=>{if(t.hasOwnProperty("id")&&t.hasOwnProperty("quantity"))return!0;if(Array.isArray(t))return t.every(i=>i.hasOwnProperty("id")&&i.hasOwnProperty("quantity"))}).flatMap(t=>t),u=e.items.map(t=>{const i=t.quantity,r=o.find(p=>p.id===t.id);return r&&(t.quantity=r.quantity,t.final_line_price=t.final_line_price/i*t.quantity,t.original_line_price=t.original_line_price/i*t.quantity,t.line_price=t.line_price/i*t.quantity),t}),n=M(u);break}n&&(b(n),$())}return Object.freeze({init:q,open:$,close:h,addNotification:b,isOpen:D})},P=()=>{window.themeCore.CartNotification=window.themeCore.CartNotification||F(),window.themeCore.utils.register(window.themeCore.CartNotification,"cart-notification")};window.themeCore&&window.themeCore.loaded?P():document.addEventListener("theme:all:loaded",P,{once:!0});
