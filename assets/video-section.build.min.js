const S=a=>{const f=window.themeCore.utils.Video,c=window.themeCore.utils.VIDEO_TYPES,y=window.themeCore.utils.cssClasses,s=window.matchMedia("(max-width: 767px)"),o={iframe:"iframe",videoContainer:".js-video-section",startButton:".js-video-start-button",videoPlaceholder:".js-video-placeholder",mobileVideoPlayer:"video__player--mobile",section:"[data-section-id]"},i={sectionId:"data-section-id",type:"data-type"},n={videoContainer:a,options:{youtube:{autoplay:0,controls:1,showinfo:0,rel:0,playsinline:1,loop:0},vimeo:{controls:!0,loop:!1,muted:!0,portrait:!1,title:!1,keyboard:!1,byline:!1,autopause:!1}}};let l;const d=a.querySelector(o.startButton);a.querySelector(o.videoPlaceholder);function p(e){return f(e).init()}function u(e,t){switch(t){case c.html:{e.play();break}case c.vimeo:{e.play();break}case c.youtube:{e.mute(),e.playVideo();break}default:return}}function m(e){if(e.type==="youtube"){e.player.pauseVideo();return}e.player.pause()}function h(e){window.innerWidth>=768&&e.device==="desktop"&&u(e.player,e.type),window.innerWidth<768&&e.device==="mobile"&&u(e.player,e.type),d==null||d.classList.add("hide"),e.videoWrapper.classList.add(y.active)}function V(e,t){e.addEventListener("click",r=>{(r.target.closest(o.startButton)||r.target.closest(o.videoPlaceholder))&&h(t)}),s.addEventListener("change",()=>{t.type==="html"&&(t.device==="mobile"&&!s.matches&&t.player.pause(),t.device==="desktop"&&s.matches&&t.player.pause()),t.type==="vimeo"&&(t.device==="mobile"&&!s.matches&&t.player.pause(),t.device==="desktop"&&s.matches&&t.player.pause()),t.type==="youtube"&&(t.device==="mobile"&&!s.matches&&t.player.pauseVideo(),t.device==="desktop"&&s.matches&&t.player.pauseVideo());const r=t.videoWrapper.closest(o.section);!r||r.getAttribute(i.type)!=="popup"||h(t)})}async function C(){l=p(n),l&&l.length&&l.forEach(e=>{V(a,e);const t=e.videoWrapper.closest(o.section);if(!t)return;const r=t.getAttribute(i.sectionId);t.getAttribute(i.type)==="popup"&&(window.themeCore.EventBus.listen(`Toggle:video-${r}:open`,w=>{!w.contains(e.videoWrapper)||getComputedStyle(e.videoWrapper).getPropertyValue("display")==="none"||h(e)}),window.themeCore.EventBus.listen(`Toggle:video-${r}:close`,w=>{w.contains(e.videoWrapper)&&m(e)}))})}return Object.freeze({init:C})},b={section:".js-video-section",videoContainer:".js-video-container",videoPopup:".js-video-popup"},E={sectionId:"data-section-id"},v=()=>{const a=window.themeCore.utils.Toggle;let f=[],c={};function y(o,i){return f.filter(n=>n.querySelector(i)).map(n=>{const l=n.querySelector(i),d=n.getAttribute(E.sectionId),p=n.querySelector(b.videoPopup);if(p){const u=a({toggleSelector:`video-${d}`});u.init(),p.addEventListener("click",m=>{m.target===p&&u.close(p)})}return o(l)})}function s(o){f=[...document.querySelectorAll(b.section)].filter(i=>!o||i.closest(`#shopify-section-${o}`)),c={Video:y(S,b.videoContainer)};for(const i in c)c[i].forEach(n=>n.init())}return Object.freeze({init:s})},g=()=>{window.themeCore.VideoSectionPlayer=window.themeCore.VideoSectionPlayer||v(),window.themeCore.utils.register(window.themeCore.VideoSectionPlayer,"video")};window.themeCore&&window.themeCore.loaded?g():document.addEventListener("theme:all:loaded",g,{once:!0});
