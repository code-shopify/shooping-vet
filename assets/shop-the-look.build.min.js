const l={section:".js-shop-the-look",lookSlider:".js-shop-the-look-slider",lookSlide:".js-shop-the-look-slide",lookThumbSlider:".js-shop-the-look-thumb-slider",lookThumbSlide:".js-shop-the-look-thumb-slide",productsSlider:".js-shop-the-look-products-slider-mobile",productsSlide:".js-shop-the-look-products-slide-mobile",productsPagination:".js-shop-the-look-products-pagination-mobile",productsSliderFraction:".js-shop-the-look-products-slider-fraction-mobile",lookPointButton:".js-shop-the-look-point",lookPointButtonMobile:".js-shop-the-look-point-mobile",productsDrawer:".js-shop-the-look-drawer-mobile",productModal:".js-shop-the-look-product-modal",productModalContainer:".js-shop-the-look-product-modal-container",productModalClose:".js-shop-the-look-product-modal-close"},$={activeSlide:"swiper-slide-active"},U={ariaExpanded:"aria-expanded"},O={afterMedium:"(min-width: 1200px)"},R=()=>{let a=[];const p=window.themeCore.utils.Swiper,u=window.themeCore.utils.cssClasses;let w,m,b;const M=window.themeCore.utils.Toggle,g=window.matchMedia(O.afterMedium);let k=g.matches;async function B(e){const o=[...document.querySelectorAll(l.section)].filter(t=>!e||t.closest(`#shopify-section-${e}`));w=await window.themeCore.utils.getExternalUtil("swiperEffectFade"),m=await window.themeCore.utils.getExternalUtil("swiperMousewheel"),p.use([w,m]),o.forEach(t=>{a.push({section:t,lookSlider:t.querySelector(l.lookSlider),lookSlides:[...t.querySelectorAll(l.lookSlide)],lookThumbSlider:t.querySelector(l.lookThumbSlider),lookThumbSlides:[...t.querySelectorAll(l.lookThumbSlide)],productsSliders:[...t.querySelectorAll(l.productsSlider)],productsSlides:[...t.querySelectorAll(l.productsSlide)],pointButtons:[...t.querySelectorAll(l.lookPointButton)],pointButtonsMobile:[...t.querySelectorAll(l.lookPointButtonMobile)]})}),L(),y(),E(),T()}function y(){a.forEach(({lookSlides:e,pointButtonsMobile:o})=>{e.forEach(t=>{const r=+t.dataset.blockIndex;window.themeCore.EventBus.listen(["EscEvent:on",`Overlay:shopTheLookDrawerProducts-${r}:close`,`Toggle:shopTheLookDrawerProducts-${r}:close`],()=>{h(o)})})})}function T(){a.forEach(({lookSlides:e})=>{e.forEach(o=>{const t=o.querySelector(l.lookPointButtonMobile);if(!t)return;const r=t.dataset.jsToggle;r&&M({toggleSelector:r,toggleTabIndex:!0,overlayPlacement:document.body}).init()})})}function L(){g.addEventListener("change",x),a.forEach(({section:e})=>{e.addEventListener("click",A),e.addEventListener("click",I),e.addEventListener("click",q),e.addEventListener("click",F)})}function x(e){k=e.matches;let o,t,r,n,i;a.forEach(({lookSlides:s})=>{o=s;const c=s.find(d=>d.classList.contains($.activeSlide));i=[...c.querySelectorAll(l.lookPointButtonMobile)],t=+c.dataset.blockIndex}),k?(window.themeCore.EventBus.emit(`Toggle:shopTheLookDrawerProducts-${t}:close`),h(i)):(o.forEach(s=>{n=[...s.querySelectorAll(l.lookPointButton)],r=s.querySelector(l.productModal),r.classList.remove(u.active),h(n)}),E())}function q(e){var r;const o=e.target.closest(l.lookThumbSlide);if(!o)return;const t=o.closest(l.lookThumbSlider);f(t.swiper,(r=o.dataset)==null?void 0:r.slideIndex)}function A(e){const o=e.target.closest(l.lookPointButton);o&&j(o)}function I(e){const o=e.target.closest(l.lookPointButtonMobile);o&&D(o)}function j(e){const o=e.closest(l.lookSlide),t=+e.dataset.productIndex,r=[...o==null?void 0:o.querySelectorAll(l.lookPointButton)];h(r),C(e);const n=o.querySelector(l.productModal),i=[...n.querySelectorAll(l.productModalContainer)],s=i.find(d=>+d.dataset.productIndex===t),c=s.querySelector(l.productModalClose);n.classList.add(u.active),i.forEach(d=>{const H=d.querySelector(l.productModalClose);d.classList.remove(u.active),S(H,!1)}),s.classList.add(u.active),S(c,!0)}function D(e){var s;const o=e.closest(l.lookSlide),t=+e.dataset.blockIndex,r=+e.dataset.productIndex,n=[...o==null?void 0:o.querySelectorAll(l.lookPointButton)];h(n),C(e);const i=(s=a.find(c=>c.productsSliders.some(d=>+d.dataset.blockIndex===t)))==null?void 0:s.productsSliders.find(c=>+c.dataset.blockIndex===t);f(i.swiper,r),r===0&&v(i,r+1)}function F(e){const o=e.target.closest(l.productModalClose);if(!o)return;const t=o.closest(l.lookSlide),r=[...t==null?void 0:t.querySelectorAll(l.lookPointButton)];t.querySelector(l.productModal).classList.remove(u.active),h(r),S(o,!1)}function S(e,o){e&&e.setAttribute(U.ariaExpanded,o)}function f(e,o){e.slideTo(o)}function h(e){e.forEach(o=>o.classList.remove(u.active))}function C(e){e.classList.add(u.active)}function E(){a.forEach(e=>{V(e.lookSlider,e.lookThumbSlider),!k&&e.productsSliders.forEach(o=>{const t=o.querySelector(l.productsPagination);z(o,t)})})}function V(e,o){let t=new p(o,{direction:"horizontal",slidesPerView:3.65,spaceBetween:8,watchSlidesProgress:!0,breakpoints:{576:{direction:"horizontal",slidesPerView:4},1200:{direction:"vertical",slidesPerView:"auto"}}}),r=new p(e,{direction:"horizontal",slidesPerView:1,effect:"fade",fadeEffect:{crossFade:!0},speed:600,spaceBetween:16,thumbs:{swiper:t},breakpoints:{1200:{direction:"vertical"}}});r.on("slideChange",function(){f(t,r.activeIndex)})}function z(e,o){b=new p(e,{grabCursor:!0,slidesPerView:1,spaceBetween:16,pagination:{el:o,type:"bullets",clickable:!0}}),b.on("slideChange",function(t){v(e,t.activeIndex+1)})}function v(e,o){const t=e.closest(l.productsDrawer);if(!t)return;const r=t.querySelector(l.productsSliderFraction);r&&(r.innerHTML=o)}return Object.freeze({init:B})},P=()=>{window.themeCore.ShopTheLook=window.themeCore.ShopTheLook||R(),window.themeCore.utils.register(window.themeCore.ShopTheLook,"shop-the-look")};window.themeCore&&window.themeCore.loaded?P():document.addEventListener("theme:all:loaded",P,{once:!0});
