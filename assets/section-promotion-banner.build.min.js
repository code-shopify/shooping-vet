const i={promoBanner:".js-promotion-banner",promoBannerCloseButton:".js-promotion-banner-close-button",productsPopup:"promotion-products-popup",productsPopupToggle:"promotion-products-popup-toggle",cartNotification:".js-cart-notification",main:"#MainContent"},P=()=>{const a=window.themeCore.utils.setCookie,l=window.themeCore.utils.getCookie,t=window.themeCore.utils.cssClasses,p=3e3,m=window.themeCore.utils.Toggle;let o,e;function d(){if(o=document.querySelector(i.promoBanner),e=document.getElementById("promotion-products-popup"),!o)return!1;setTimeout(g,p),f(),e&&B()}function w(){if(!o.hasAttribute("data-cookie-time"))return;let r=o.dataset.cookieTime*24*60*60;a("promo_banner","1",{"max-age":r})}function f(){o.querySelector(i.promoBannerCloseButton).addEventListener("click",()=>{C()})}function C(){w(),o.remove(),o=null,e&&(e.remove(),e=null)}function g(){l("promo_banner")||o.classList.add(t.active)}function B(){const n=m({toggleSelector:i.productsPopupToggle});let r=!1;n.init(),window.themeCore.EventBus.listen("Toggle:promotion-products-popup-toggle:open",function(){r||(e.classList.add("is-loaded-once"),r=!0)}),window.themeCore.EventBus.listen("Quick-view:close",function(){const s=document.getElementById("CartDrawer"),c=document.querySelector(i.cartNotification);!s||!o||!s.classList.contains(t.active)&&o.classList.contains(t.active)&&setTimeout(()=>{c&&c.classList.contains(t.active)||n.open(e)},800)})}return Object.freeze({init:d})},u=()=>{window.themeCore.ProductPromoBanner=window.themeCore.ProductPromoBanner||P(),window.themeCore.utils.register(window.themeCore.ProductPromoBanner,"promotion-banner-popup")};window.themeCore&&window.themeCore.loaded?u():document.addEventListener("theme:all:loaded",u,{once:!0});
